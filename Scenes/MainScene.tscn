[gd_scene load_steps=10 format=2]

[ext_resource path="res://Scripts/GameManager.gd" type="Script" id=1]
[ext_resource path="res://Textures/chambre.png" type="Texture" id=2]
[ext_resource path="res://Scripts/SleepFeedbacks.gd" type="Script" id=3]
[ext_resource path="res://Scripts/Distractions/Window/WindowDragable.gd" type="Script" id=5]
[ext_resource path="res://Textures/decors.png" type="Texture" id=6]
[ext_resource path="res://Scripts/Distractions/Window/WindowDistraction.gd" type="Script" id=7]
[ext_resource path="res://Sounds/Retro Cinematic Wind 02.wav" type="AudioStream" id=8]
[ext_resource path="res://Textures/fenetre.png" type="Texture" id=9]

[sub_resource type="RectangleShape2D" id=1]
extents = Vector2( 209.174, 45.1784 )

[node name="Node" type="Node"]
script = ExtResource( 1 )

[node name="Outside" type="Sprite" parent="."]
position = Vector2( 426, 165 )
texture = ExtResource( 6 )
__meta__ = {
"_edit_lock_": true
}

[node name="LevelTimer" type="Timer" parent="."]
unique_name_in_owner = true
wait_time = 30.0
__meta__ = {
"_editor_description_": "Duration of each levels.
At the end of this timer, we start the next level.
This will add a new set of potential distractions, on top of the current one."
}

[node name="NewDistractionTriggerTimer" type="Timer" parent="."]
unique_name_in_owner = true
wait_time = 3.0

[node name="Window" type="Sprite" parent="."]
script = ExtResource( 7 )
open_position = Vector2( 330, -40 )
open_rotation = 3.0

[node name="WindowDragable" type="Node2D" parent="Window"]
script = ExtResource( 5 )
source_area2D_node_path = "Window/source_Area2D"
target_area2D_node_path = "target_Area2D"

[node name="Tween" type="Tween" parent="Window/WindowDragable"]

[node name="target_Area2D" type="Area2D" parent="Window/WindowDragable"]
position = Vector2( 40, 0 )
rotation = -0.401426

[node name="target" type="CollisionShape2D" parent="Window/WindowDragable/target_Area2D"]
position = Vector2( 313.822, 480.667 )
rotation = -0.00523596
shape = SubResource( 1 )

[node name="Window" type="Sprite" parent="Window/WindowDragable"]
position = Vector2( 350, 140 )
texture = ExtResource( 9 )

[node name="source_Area2D" type="Area2D" parent="Window/WindowDragable/Window"]
position = Vector2( 161, -47 )
__meta__ = {
"_edit_lock_": true
}

[node name="source" type="CollisionPolygon2D" parent="Window/WindowDragable/Window/source_Area2D"]
position = Vector2( -1.75787, -0.559929 )
polygon = PoolVector2Array( 164.758, 51.5599, 178.758, 157.56, -258.242, 368.56, -309.242, 273.56 )

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="Window"]
stream = ExtResource( 8 )
volume_db = -8.0
pitch_scale = 1.16

[node name="Backgrnound" type="Sprite" parent="."]
texture = ExtResource( 2 )
centered = false
__meta__ = {
"_edit_lock_": true
}

[node name="SleepFeedbacks" type="Node" parent="."]
unique_name_in_owner = true
script = ExtResource( 3 )

[node name="ProgressBar" type="ProgressBar" parent="SleepFeedbacks"]
anchor_left = 0.1
anchor_top = 0.85
anchor_right = 0.9
anchor_bottom = 0.95
mouse_filter = 2

[connection signal="timeout" from="LevelTimer" to="." method="_on_LevelTimer_timeout"]
[connection signal="timeout" from="NewDistractionTriggerTimer" to="." method="_on_NewDistractionTriggerTimer_timeout"]
[connection signal="target_reached" from="Window/WindowDragable" to="Window" method="_on_WindowDragable_target_reached"]
